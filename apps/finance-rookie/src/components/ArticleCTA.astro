---
const { article, variant = "hero", class: className } = Astro.props;
const tags = article?.data?.tags ?? [];
const hasAnalysisTag = tags.some((tag) => tag.toLowerCase() === "analisi");
const analysisHref = article?.data?.analysisUrl ?? "/category/analisi";
const isAnalysis = Boolean(article?.data?.analysisUrl) || hasAnalysisTag;

const primary =
  variant === "article"
    ? {
        href: isAnalysis ? analysisHref : "#contenuto",
        label: isAnalysis ? "Vai alle analisi" : "Leggi ora"
      }
    : {
        href: isAnalysis ? analysisHref : `/article/${article.slug}`,
        label: isAnalysis ? "Vai alle analisi" : "Leggi ora"
      };

const secondary =
  variant === "hero"
    ? {
        href: isAnalysis ? `/article/${article.slug}` : "/category/analisi",
        label: isAnalysis ? "Leggi ora" : "Vai alle analisi"
      }
    : null;
---
<div class:list={["flex items-center gap-4 text-[0.65rem] font-semibold uppercase tracking-[0.32em]", className]}>
  <a
    href={primary.href}
    class="rounded-full border border-border px-4 py-2 text-fg transition-all hover:border-accent hover:text-accent focus-visible:outline focus-visible:outline-2 focus-visible:outline-accent focus-visible:outline-offset-2"
  >
    {primary.label}
  </a>
  {secondary && (
    <a
      href={secondary.href}
      class="text-muted transition-colors hover:text-accent focus-visible:outline focus-visible:outline-2 focus-visible:outline-accent focus-visible:outline-offset-2"
    >
      {secondary.label}
    </a>
  )}
</div>
