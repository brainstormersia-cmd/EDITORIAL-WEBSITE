---
import { Image } from "astro:assets";
import { slugify } from "../utils/slug";

const { post, image, variant = "standard" } = Astro.props;
---
<article class={`border border-border p-4 ${variant === "compact" ? "flex gap-4" : ""}`}>
  {image && (
    <a href={`/blog/${post.slug}`} class="block">
      <Image
        src={image}
        alt={post.data.title}
        width={variant === "compact" ? 160 : 640}
        height={variant === "compact" ? 120 : 360}
        class="object-cover w-full h-full"
        loading="lazy"
      />
    </a>
  )}
  <div class={variant === "compact" ? "flex-1" : "mt-4"}>
    <p class="text-xs uppercase tracking-[0.3em] text-muted">{post.data.category}</p>
    <h3 class="text-lg font-semibold mt-2">
      <a href={`/blog/${post.slug}`} class="hover:text-accent">{post.data.title}</a>
    </h3>
    <p class="text-sm text-muted mt-2">{post.data.description}</p>
    <div class="mt-3 flex flex-wrap gap-2 text-xs uppercase tracking-widest">
      {post.data.tags.slice(0, 2).map((tag) => (
        <a href={`/tags/${slugify(tag)}`} class="border border-border px-2 py-1 hover:border-accent">
          {tag}
        </a>
      ))}
    </div>
  </div>
</article>
